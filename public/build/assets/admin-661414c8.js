document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",c);var o,l;function c(e){o=e.target.closest("[data-delete-route]"),o&&(e.preventDefault(),l=o.dataset.deleteRoute)}document.getElementById("confirmDeleteBtn").addEventListener("click",()=>{d()});function d(){fetch(l).then(e=>e.json()).then(e=>{e.error==!0?toastr.error(e.message,"Admin Panel"):toastr.success(e.message,"Admin Panel")}),o.parentElement.parentElement.parentElement.remove()}document.addEventListener("click",function(e){const t=e.target.closest("[data-row-data]");if(!t)return;e.preventDefault();const r=t.dataset.updateRoute,n=JSON.parse(t.dataset.rowData);document.getElementById("updateDataForm").setAttribute("action",r),Array.from(document.querySelectorAll(".updateDataField")).forEach((a,i)=>{a.value=n[i]})}),$("form").submit(function(e){e.preventDefault();const t=$(this),r=t.attr("action"),n=t.attr("method"),s=new FormData(this);$.ajax({url:r,type:n,data:s,contentType:!1,processData:!1,success:function(a){a.error==!0?toastr.error(a.message,"Admin Panel"):(toastr.success(a.message,"Admin Panel"),t.parents(".modal").length>0&&t[0].reset(),$(".modal").modal("hide"),$(".dataTable").DataTable().draw())},error:function(a){console.error("Error:",a)}})}),$(".modal").on("hidden.coreui.modal",function(){$(this).find("form").trigger("reset")}),$("[data-table-route]").each(function(e){const r=$(this).attr("data-table-route"),n=$(this).find("th").map(function(s,a){return{data:$(this).text()==="#"?"serial":$(this).text().toLowerCase(),name:$(this).text(),searchable:$(this).text()!=="#"&&$(this).text()!=="Actions",orderable:$(this).text()!=="Actions",defaultContent:"NA"}});$("[data-table-route]").DataTable({language:{zeroRecords:"No record(s) found."},processing:!0,serverSide:!0,lengthChange:!0,order:[0,"asc"],searchable:!0,bStateSave:!1,ajax:{url:r,data:function(s){}},columns:n})})});
